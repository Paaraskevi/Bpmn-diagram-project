
<div class="file-manager-container">
    <mat-toolbar color="primary" class="manager-toolbar">
        <button mat-icon-button (click)="toggleSidebar()">
            <mat-icon>menu</mat-icon>
        </button>
    </mat-toolbar>
    <span class="toolbar-title">
        <mat-icon>folder</mat-icon>
        BPMN FILE MANAGER
    </span>

    <div class="search-container">
        <mat-form-field appearance="outline" subscriptSizing="dynamic">
            <mat-label>
                Search Files and folders>
            </mat-label>
            <input matInput
                   [(ngModel)]="searchQuery" 
                   (keyup.enter)="search()"
                   (input)="onSearchInput()"
                   placeholder="Search files and folders...">
            <mat-icon matSuffix (click)="search()" class="search-icon">search</mat-icon>
          </mat-form-field>
        <div class="view-options">
          <mat-form-field appearance="outline" subscriptSizing="dynamic">
            <mat-select [(value)]="currentView" (selectionChange)="onViewChange()">
              <mat-option value="tree">Tree View</mat-option>
              <mat-option value="list">List View</mat-option>
              <mat-option value="split">Split View</mat-option>
            </mat-select>
          </mat-form-field>
        </div>

        <!-- Actions Menu -->
        <button mat-icon-button [matMenuTriggerFor]="actionsMenu">
          <mat-icon>more_vert</mat-icon>
        </button>
        
        <mat-menu #actionsMenu="matMenu">
          <button mat-menu-item (click)="uploadFiles()">
            <mat-icon>upload</mat-icon>
            <span>Upload Files</span>
          </button>
          <button mat-menu-item (click)="createFolder()">
            <mat-icon>create_new_folder</mat-icon>
            <span>Create Folder</span>
          </button>
          <mat-divider></mat-divider>
          <button mat-menu-item (click)="refreshAll()">
            <mat-icon>refresh</mat-icon>
            <span>Refresh</span>
          </button>
          <button mat-menu-item (click)="toggleSettings()">
            <mat-icon>settings</mat-icon>
            <span>Settings</span>
          </button>
        </mat-menu>
     
      <!-- Main Content -->
      <mat-sidenav-container class="main-container">
        <!-- Sidebar with Quick Navigation -->
        <mat-sidenav #sidebar 
                     mode="side" 
                     [opened]="sidebarOpen" 
                     position="start"
                     class="navigation-sidebar">
          <div class="sidebar-content">
            <h3>Quick Navigation</h3>
            
            <!-- Quick Links -->
            <!-- <div class="quick-links">
              <button mat-button (click)="navigateToRecent()" class="nav-button">
                <mat-icon>access_time</mat-icon>
                Recent Files
                <mat-badge [value]="recentCount" matBadgeSize="small"></mat-badge>
              </button>
              
              <button mat-button (click)="navigateToTemplates()" class="nav-button">
                <mat-icon>star</mat-icon>
                Templates
                <mat-badge [value]="templateCount" matBadgeSize="small"></mat-badge>
              </button>
              
              <button mat-button (click)="navigateToPublic()" class="nav-button">
                <mat-icon>public</mat-icon>
                Public Files
                <mat-badge [value]="publicCount" matBadgeSize="small"></mat-badge>
              </button>
              
              <button mat-button (click)="navigateToShared()" class="nav-button">
                <mat-icon>people</mat-icon>
                Shared With Me
              </button>
            </div> -->

            <!-- Folder Tree Navigation -->
            <div class="folder-navigation" *ngIf="currentView !== 'tree'">
              <h4>Folders</h4>
              <div class="mini-tree">
                <!-- Simplified folder tree for navigation -->
                <!-- This would be a simplified version of the tree component -->
              </div>
            </div>

            <!-- File Statistics -->
            <div class="statistics">
              <h4>Statistics</h4>
              <div class="stat-item">
                <span class="stat-label">Total Files:</span>
                <span class="stat-value">{{ totalFiles }}</span>
              </div>
              <div class="stat-item">
                <span class="stat-label">Total Size:</span>
                <span class="stat-value">{{ formatFileSize(totalSize) }}</span>
              </div>
              <div class="stat-item">
                <span class="stat-label">BPMN Files:</span>
                <span class="stat-value">{{ bpmnFiles }}</span>
              </div>
            </div>
          </div>
        </mat-sidenav>

        <!-- Main Content Area -->
        <mat-sidenav-content class="content-area">
          <!-- Loading Bar -->
          <mat-progress-bar mode="indeterminate" *ngIf="loading"></mat-progress-bar>

          <!-- Search Results -->
          <div class="search-results" *ngIf="showSearchResults && searchResults">
            <h3>
              <mat-icon>search</mat-icon>
              Search Results for "{{ searchQuery }}" ({{ searchResults.totalResults }} results)
              <button mat-icon-button (click)="clearSearch()" class="clear-search">
                <mat-icon>close</mat-icon>
              </button>
            </h3>
            
            <!-- Search results would be displayed here -->
            <div class="search-content">
              <!-- Files found -->
              <div class="search-section" *ngIf="searchResults.files.length > 0">
                <h4>Files ({{ searchResults.files.length }})</h4>
                <!-- List of found files -->
              </div>
              
              <!-- Folders found -->
              <div class="search-section" *ngIf="searchResults.folders.length > 0">
                <h4>Folders ({{ searchResults.folders.length }})</h4>
                <!-- List of found folders -->
              </div>
            </div>
          </div>

          <!-- File Views -->
          <div class="file-views" *ngIf="!showSearchResults">
            <!-- Tree View -->
            <div class="view-container" *ngIf="currentView === 'tree'">
              <app-file-tree></app-file-tree>
            </div>

            <!-- List View -->
            <div class="view-container" *ngIf="currentView === 'list'">
                <app-list-files [currentFolder]="currentFolder"></app-list-files>
            </div>

            <!-- Split View -->
            <div class="split-view" *ngIf="currentView === 'split'">
              <div class="split-left">
                <h3>Folder Tree</h3>
                <app-file-tree></app-file-tree>
              </div>
              <div class="split-right">
                <h3>
                  {{ currentFolder ? currentFolder.folderName : 'Root Folder' }}
                </h3>
             <app-list-files [currentFolder]="currentFolder"></app-list-files>
              </div>
            </div>
          </div>
        </mat-sidenav-content>
      </mat-sidenav-container>
    </div>
</div>
