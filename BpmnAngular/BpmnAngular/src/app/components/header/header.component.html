<header class="app-header">
      <div class="header-left">
        <button class="menu-toggle" (click)="toggleSidebar()">
          <i class="icon-menu"></i>
        </button>
        <div class="logo">
          <h2>BPMN Manager</h2>
        </div>
      </div>

      <div class="header-center">
        <div class="search-container">
          <input 
            type="text" 
            placeholder="Search diagrams..." 
            class="search-input"
            [(ngModel)]="searchTerm"
            (keyup.enter)="search()">
          <button class="search-btn" (click)="search()">
            <i class="icon-search"></i>
          </button>
        </div>
      </div>

      <div class="header-right">
        <!-- Notifications -->
        <div class="notification-bell">
          <button class="icon-btn" (click)="showNotifications = !showNotifications">
            <i class="icon-bell"></i>
            <span class="notification-count" *ngIf="notificationCount > 0">{{notificationCount}}</span>
          </button>
          <div class="notifications-dropdown" *ngIf="showNotifications">
            <div class="notifications-header">
              <h4>Notifications</h4>
              <button class="clear-all" (click)="clearAllNotifications()">Clear All</button>
            </div>
            <div class="notifications-list">
              <div *ngIf="notifications.length === 0" class="no-notifications">
                No new notifications
              </div>
              <div *ngFor="let notification of notifications" class="notification-item">
                <div class="notification-content">
                  <p>{{notification.message}}</p>
                  <small>{{notification.time | date:'short'}}</small>
                </div>
                <button class="remove-notification" (click)="removeNotification(notification.id)">
                  <i class="icon-close"></i>
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- User Menu -->
        <div class="user-menu">
          <button class="user-avatar" (click)="showUserMenu = !showUserMenu">
            <div class="avatar-circle">
              {{getUserInitials()}}
            </div>
            <span class="user-name">{{currentUser?.firstName}} {{currentUser?.lastName}}</span>
            <i class="icon-chevron-down" [class.rotated]="showUserMenu"></i>
          </button>
          
          <div class="user-dropdown" *ngIf="showUserMenu">
            <div class="user-info">
              <div class="user-details">
                <strong>{{currentUser?.firstName}} {{currentUser?.lastName}}</strong>
                <small>{{currentUser?.email}}</small>
                <div class="user-roles">
                  <span *ngFor="let role of currentUser?.roles" 
                        class="role-badge" 
                        [class]="getRoleBadgeClass(role.name)">
                    {{role.displayName || role.name}}
                  </span>
                </div>
              </div>
            </div>
            <div class="menu-divider"></div>
            <a class="menu-item" (click)="navigateToProfile()">
              <i class="icon-user"></i>
              Profile
            </a>
            <a class="menu-item" (click)="navigateToSettings()">
              <i class="icon-settings"></i>
              Settings
            </a>
            <div class="menu-divider" *appHasRole="'ROLE_ADMIN'"></div>
            <a class="menu-item" *appHasRole="'ROLE_ADMIN'" (click)="navigateToAdmin()">
              <i class="icon-admin"></i>
              Admin Panel
            </a>
            <div class="menu-divider"></div>
            <a class="menu-item logout" (click)="logout()">
              <i class="icon-logout"></i>
              Logout
            </a>
          </div>
        </div>
      </div>
    </header>